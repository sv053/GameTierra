PRAGMA foreign_keys=ON;
BEGIN TRANSACTION;
CREATE TABLE IF NOT EXISTS "user"
(
    "id"            INTEGER,
    "login"         TEXT NOT NULL CHECK ("login" != ''),
    "balance"       REAL,
    "tier_id"       INTEGER,
    PRIMARY KEY ("id" AUTOINCREMENT),
    CONSTRAINT "tier_fk" FOREIGN KEY ("tier_id") REFERENCES "tier" ("id")
);
INSERT INTO user VALUES(2,'JackBlack',718.7300000000000182,5);
INSERT INTO user VALUES(3,'Jody',298.30000000000001137,4);
INSERT INTO user VALUES(4,'thelost',765.20000000000004546,1);
CREATE TABLE IF NOT EXISTS "game"
(
    "id"            INTEGER,
    "name"          TEXT NOT NULL CHECK ("name" != ''),
    "price"         REAL,
    PRIMARY KEY ("id" AUTOINCREMENT)
);
INSERT INTO game VALUES(1,'GRAND_THEFT_AUTO',32.200000000000002843);
INSERT INTO game VALUES(2,'FORZA_HORIZON',71.730000000000003978);
INSERT INTO game VALUES(3,'ASSASSIN_S_CREED',29.829999999999998294);
INSERT INTO game VALUES(4,'DOOM_ETERNAL',43.869999999999997443);
INSERT INTO game VALUES(5,'RED_DEAD_REDEMPTION',98.299999999999997154);
INSERT INTO game VALUES(6,'THE_WITCHER',18.699999999999999289);
INSERT INTO game VALUES(7,'THE_LAST_OF_US',158.30000000000001137);
CREATE TABLE IF NOT EXISTS "tier"
(
    "id"            INTEGER,
    "name"         TEXT NOT NULL CHECK ("name" != ''),
    "percentage"    REAL,
    PRIMARY KEY ("id" AUTOINCREMENT)
);
INSERT INTO tier VALUES(1,'FREE',0.0);
INSERT INTO tier VALUES(2,'BRONZE',5.0);
INSERT INTO tier VALUES(3,'SILVER',10.0);
INSERT INTO tier VALUES(4,'GOLD',20.0);
INSERT INTO tier VALUES(5,'PLATINUM',30.0);
CREATE TABLE IF NOT EXISTS "user_game"
(
    "user_id"       INTEGER,
    "game_id"       INTEGER,
    CONSTRAINT "user_fk" FOREIGN KEY ("user_id") REFERENCES "user" ("id") ON DELETE CASCADE,
    CONSTRAINT "game_fk" FOREIGN KEY ("game_id") REFERENCES "game" ("id") ON DELETE CASCADE
);
INSERT INTO user_game VALUES(2,3);
INSERT INTO user_game VALUES(2,5);
INSERT INTO user_game VALUES(2,6);
INSERT INTO user_game VALUES(3,1);
INSERT INTO user_game VALUES(3,2);
INSERT INTO user_game VALUES(3,7);
COMMIT;
